mutation CreateUser @auth(level: USER) {
  user_insert(data: {
    username: "exampleUser",
    email: "user@example.com",
    passwordHash: "hashedPassword",
    role: "user",
    createdAt_expr: "request.time"
  })
}

query ListRides @auth(level: USER) {
  rides {
    id
    status
    fare
  }
}

mutation UpdateDriverProfile @auth(level: USER) {
  driverProfile_update(
    key: {id_expr: "auth.uid"},
    data: {
      availabilityStatus: "available"
    }
  )
}

query GetRideReviews($rideId: UUID!) @auth(level: PUBLIC, insecureReason: "This operation is safe to expose to the public") {
  ride(id: $rideId) {
    reviews_on_ride {
      id
      comment
      rating
      reviewer {
        id
        username
      }
    }
  }
}